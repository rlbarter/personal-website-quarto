{"title":"Alternatives to grouped bar charts","markdown":{"yaml":{"title":"Alternatives to grouped bar charts","author":"Rebecca Barter","categories":["R","visualization"],"date":"2018-05-29","format":{"html":{"toc":true,"toc-location":"left"}},"description":"One of the most common chart types that is simultaneously the most difficult to read is the grouped bar chart. Fortunately, there exist several substantially more effective alternatives that convey the same information without overwhelming our visual cognition abilities."},"headingText":"load in libraries","containsRefs":false,"markdown":"\n\n\nAt some point in your life you have probably found yourself standing face-to-face with a beast known as a grouped bar chart. Perhaps it was in a research paper where the authors were trying to compare the results of several models across different datasets, or it was in a talk given by a colleague who was trying to compare the popularity of different products among distinct groups of consumers. \n\nThe first time you encountered a grouped bar chart you might have thought \"what a neat way to put so much information in a single plot!\". However, the moment you started trying to see whether the orange bar always does better than the green bar but worse than the blue bar.\n\nIn the example below (made with ggplot2), I show a simple grouped bar chart comparing research funding success rates across a variety of disciplines with the data split into two categories for each discipline: males and females. This data came from Rafael Irizarry's excellent R package, `dslabs`, containing datasets for teaching data science. \n\n\n```{r echo = FALSE, message=FALSE, warning=FALSE}\nlibrary(tidyverse)\nlibrary(dslabs)\nlibrary(knitr)\n# combine male and female success rates into single data frame\nsuccess_rates <- rbind(\n  # male success rates\n  transmute(research_funding_rates, \n            discipline, \n            success = success_rates_men, \n            gender = \"Male\"),\n  # female success rates\n  transmute(research_funding_rates, \n            discipline, \n            success = success_rates_women, \n            gender = \"Female\"))\n```\n\n```{r echo = FALSE, message=FALSE, warning=FALSE, fig.align=\"center\", fig.width = 10}\n# make grouped bar plot\nggplot(success_rates) +\n  # add bar for each discipline colored by gender\n  geom_bar(aes(x = discipline, y = success, fill = gender),\n           stat = \"identity\", position = \"dodge\") +\n  # name axes and remove gap between bars and y-axis\n  scale_y_continuous(\"Success Rate\", expand = c(0, 0)) +\n  scale_x_discrete(\"Discipline\") +\n  scale_fill_manual(values = c(\"#468189\", \"#9DBEBB\")) +\n  # remove grey theme\n  theme_classic(base_size = 18) +\n  # rotate x-axis and remove superfluous axis elements\n  theme(axis.text.x = element_text(angle = 90, \n                                   hjust = 1, vjust = 0),\n        axis.line = element_blank(),\n        axis.ticks.x = element_blank()) \n```\n\nEven in this simple example, I find it really difficult to compare male and female funding success rates across genders. Are the males having more success than the females overall? It's genuinely hard to tell unless I examine each discipline closely and see that men are doing better in the first two groups, but not the two after that, and then I think they are doing a bit better in the categories after that, but now I'm having a hard time and I really want to stop looking at this plot now...\n\nFortunately, people such as Ann K. Emery (in [her post on grouped bar charts](http://annkemery.com/clustered-bar-chart/)) have thought about how to represent this information in a better way. Below I will show 2 alternative approaches (slope charts and horizontal dot plots). \n\nWhile these are not necessarily \"standard\" plot types (as in there is no specific `geom_` for them), true freedom in visualization comes with the realization that most plots are just arrangements of circles and lines in space. When you truly embrace this idea, you can make any type of figure you want! By means of demonstration, in my [next post I show the ggplot2 R code for making each plot](../2018-05-29_getting_fancy_ggplot2/index.html).\n\n## Slope plots\n\nThe first alternative is similar to parallel coordinates plots for multi-variate data visualization. The slope plot contains two axes (or three or four, depending on how many groups you have), one for each group (male and female). The disciplines are each represented by a line connecting the male success rates to the female success rates in as coded by their y-position. This plot makes it very clear for which disciplines women have greater funding success than men (the upward sloping, darker colored lines) and it also makes it very clear which disciplines have higher funding success rates overall (Physics and Chemical sciences).\n\n```{r echo = FALSE, message=FALSE, warning=FALSE, fig.height = 8, fig.align=\"center\"}\nresearch_funding_rates %>%\n  # add a variable for when men are more successful than women (for colours)\n  mutate(men_more_successful = success_rates_men > success_rates_women) %>%\n  ggplot() +\n  # add a line segment that goes from men to women\n  geom_segment(aes(x = 1, xend = 2, \n                   y = success_rates_men, \n                   yend = success_rates_women,\n                   group = discipline,\n                   col = men_more_successful), \n               size = 1.2) +\n  # add vertical lines that act as axis for men\n  geom_segment(x = 1, xend = 1, \n               y = min(research_funding_rates$success_rates_men) - 2,\n               yend = max(research_funding_rates$success_rates_men) + 1,\n               col = \"grey70\", size = 0.5) +\n  # add vertical lines that act as axis for women\n  geom_segment(x = 2, xend = 2, \n               y = min(research_funding_rates$success_rates_men) - 2,\n               yend = max(research_funding_rates$success_rates_men) + 1,\n               col = \"grey70\", size = 0.5) +\n  # add the white outline for the points at each rate for men\n  geom_point(aes(x = 1, \n                 y = success_rates_men), size = 4.5,\n             col = \"white\") +\n  # add the white outline for the points at each rate for women\n  geom_point(aes(x = 2, \n                 y = success_rates_women), size = 4.5,\n             col = \"white\") +\n  # add the actual points at each rate for men\n  geom_point(aes(x = 1, \n                 y = success_rates_men), size = 4,\n             col = \"grey60\") +\n  # add the actual points at each rate for men\n  geom_point(aes(x = 2, \n                 y = success_rates_women), size = 4,\n             col = \"grey60\") +\n  # add the label for each discipline next the men axis\n  geom_text(aes(x = 1 - 0.03, \n                 y = success_rates_men, \n                label = paste0(discipline, \", \", round(success_rates_men, 1), \"%\")),\n             col = \"grey30\", hjust = \"right\") +\n  # add the label next to each point on the women axis\n  geom_text(aes(x = 2 + 0.08, \n                y = success_rates_women, \n                label = paste0(round(success_rates_women, 1), \"%\")),\n            col = \"grey30\") +\n  # add the words \"men\" and \"women\" above their axes\n  geom_text(aes(x = x, y = y, label = label),\n            data = data.frame(x = 1:2, \n                              y = 2 + max(research_funding_rates$success_rates_men),\n                              label = c(\"men\", \"women\")),\n            col = \"grey30\",\n            size = 6) +\n  # set the limits of the x-axis\n  scale_x_continuous(limits = c(0.5, 2.1)) +\n  # set the colors\n  scale_color_manual(values = c(\"#468189\", \"#9DBEBB\"), guide = \"none\") +\n  # universally increase the size of the text and remove grey background\n  theme_classic(base_size = 16) + \n  # remove all axis stuff\n  theme(axis.line = element_blank(),\n        axis.text = element_blank(),\n        axis.title = element_blank(),\n        axis.ticks = element_blank())\n```\n\n\nWhat we see much more clearly is that the number of disciplines in which men are more successful is similar to the number of disciplines in which women are more successful. The discipline with the most similar success rates between men and women is the Chemical sciences. All of this information was very difficult to obtain from the grouped bar chart!\n\n\n## Horizontal dot plots\n\nAnother alternative is the horizontal dot plot: In this case each discipline is again represented by a line, but instead of coding the success rates as the y-position at the end of the discipline slope, the success rate is coded as the x-position along the discipline-specific horizontal line. I have ordered the disciplines by the women's funding success rate.\n\n```{r echo = FALSE, message = FALSE, warning = FALSE, fig.width = 8, fig.align=\"center\"}\nresearch_funding_rates %>%\n  # rearrange the factor levels for discipline by rates for women\n  arrange(success_rates_women) %>%\n  mutate(discipline = fct_inorder(discipline)) %>%\n  ggplot() +\n  # add a dummy point for scaling purposes\n  geom_point(aes(x = 12, y = discipline), \n             size = 0, col = \"white\") + \n  # add the horizontal grid lines\n  geom_hline(yintercept = 1:9, col = \"grey80\") +\n  # add a point for each male success rate\n  geom_point(aes(x = success_rates_men, y = discipline), \n             size = 11, col = \"#9DBEBB\") +\n  # add the text (%) for each male success rate\n  geom_text(aes(x = success_rates_men, y = discipline, \n                label = paste0(round(success_rates_men, 1))),\n            col = \"black\") +\n  # add the border for each point for female success rate\n  geom_point(aes(x = success_rates_women, y = discipline),\n             size = 11.5, col = \"white\") +\n  # add a point for each female success rate\n  geom_point(aes(x = success_rates_women, y = discipline),\n             size = 11, col = \"#468189\") +\n  # add the text (%) for each female success rate\n  geom_text(aes(x = success_rates_women, y = discipline, \n                label = paste0(round(success_rates_women, 1))),\n            col = \"white\") +\n  # add a label above the first two points\n  geom_text(aes(x = x, y = y, label = label, col = label),\n            data.frame(x = c(25.6 - 1.1, 26.5 + 0.6), y = 10, \n                       label = c(\"women\", \"men\")), size = 6) +\n  scale_color_manual(values = c(\"#9DBEBB\", \"#468189\"), guide = \"none\") +\n  # universally increase size of text and remove grey theme\n  theme_classic(base_size = 14) +\n  # manually specify the x-axis\n  scale_x_continuous(breaks = c(15, 20, 25), \n                     labels = c(\"15%\", \"20%\", \"25%\")) +\n  # remove gaps in the y-axis\n  scale_y_discrete(expand = c(0.2, 0)) +\n  # remove axes\n  theme(axis.title = element_blank(),\n        axis.ticks.y = element_blank(),\n        axis.line = element_blank()) \n```\n\nFor me, the horizontal dot plot highlights that in the disciplines with lower funding rates overall (the bottom few rows), men have higher success rates.\n\nRegardless of your preference, it is fairly clear that both the slope plot and the horizontal dot plots are easier to digest than the grouped bar plot!\n\n\n## Code\n\nMy [next post](../2018-05-29_getting_fancy_ggplot2/index.html) shows the ggplot2 code that I wrote to produce the three plots in this post.\n\n\n## References\n\n- The research funding data comes from Rafael Irizarry's `dslabs` R package\n\n- The slope and dot plot ideas for this post come from [Ann K. Emery's post](http://annkemery.com/clustered-bar-chart/) on the same topic. "},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"2018-05-29_alternatives_dodged_bars.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.280","theme":"simplex","linkcolor":"#6633c4","code-copy":true,"footnotes-hover":true,"title-block-banner":true,"comments":{"utterances":{"repo":"rlbarter/blog_comments"}},"title":"Alternatives to grouped bar charts","author":"Rebecca Barter","categories":["R","visualization"],"date":"2018-05-29","description":"One of the most common chart types that is simultaneously the most difficult to read is the grouped bar chart. Fortunately, there exist several substantially more effective alternatives that convey the same information without overwhelming our visual cognition abilities.","toc-location":"left"},"extensions":{"book":{"multiFile":true}}}}}